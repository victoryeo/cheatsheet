# show table contents
aws dynamodb scan --table-name BondTokens  --endpoint-url http://localhost:8000
# list all tables
aws dynamodb list-tables --endpoint-url http://localhost:8000

# include primary key and sort key when deleting item
aws dynamodb delete-item --table-name BondTokens --key '{"companyID":{"N":"1"}, "companyName":{"S":"A"}}'  --endpoint-url http://localhost:8000

# query using primary key
aws dynamodb query   --table-name BondTokens --key-condition-expression "companyID = :id" --expression-attribute-values  '{":id":{"N":"0"}}' --endpoint-url http://localhost:8000

# return info about the table
aws dynamodb describe-table --table-name BondTokens --endpoint-url http://localhost:8000

# set cluster to EKS cluster
aws eks --region <region_name> update-kubeconfig --name <cluster_name>

# View your cluster's OIDC provider URL
aws eks describe-cluster --name besu-cluster-tf --query "cluster.identity.oidc.issuer" --output text

# List the IAM OIDC providers in your account
aws iam list-open-id-connect-providers

# Create an IAM OIDC identity provider for your cluster
eksctl utils associate-iam-oidc-provider --cluster my-cluster --approve

# Create an IAM role for a service account
eksctl create iamserviceaccount  --name ebs-csi-controller-sa     --namespace kube-system     --cluster besu-cluster-tf     --role-name "ebs-iam-role-name"     --attach-policy-arn arn:aws:iam::281215527701:policy/ebs-csi-driver     --approve --override-existing-serviceaccounts

# annotate service account with IAM role
kubectl annotate serviceaccount -n kube-system ebs-csi-controller-sa eks.amazonaws.com/role-arn=arn:aws:iam::281215527701:role/AmazonEKS_EBS_CSI_DriverRole --overwrite
